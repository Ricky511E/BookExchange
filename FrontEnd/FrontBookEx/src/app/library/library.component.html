<div class="library-container">
    <h1 class="page-title">Libreria di scambio</h1>
    <div class="lists">
      <div class="list">
        <h3>Libri di tuo interesse</h3>
        <ng-container *ngIf="interestedBooks.length; else noInterested">
          <ul>
            <li *ngFor="let b of interestedBooks">
              <label>
                <input
                  type="radio"
                  name="interested"
                  (change)="selectInterested(b)"
                  [checked]="selectedInterested === b"
                />
                <span class="book-info">
                  <strong>{{ b.title }}</strong> – {{ b.author }}<br>
                  <em>Proprietario: {{ b.owner }}</em>
                </span>
              </label>
            </li>
          </ul>
        </ng-container>
        <ng-template #noInterested>
          <p class="empty-msg">Nessun libro presente</p>
        </ng-template>
      </div>
      <div class="swap-area">
        <button
          class="btn swap-btn"
          (click)="openConfirm()"
          [disabled]="!selectedInterested || !selectedOwn"
        >
          ← Scambia →
        </button>
      </div>
      <div class="list">
        <h3>I tuoi libri</h3>
        <ng-container *ngIf="ownBooks.length; else noOwn">
          <ul>
            <li *ngFor="let b of ownBooks">
              <label>
                <input
                  type="radio"
                  name="own"
                  (change)="selectOwn(b)"
                  [checked]="selectedOwn === b"
                />
                <span class="book-info">
                  <strong>{{ b.title }}</strong> – {{ b.author }}<br>
                  <em>Proprietario: {{ b.owner }}</em>
                </span>
              </label>
            </li>
          </ul>
        </ng-container>
        <ng-template #noOwn>
          <p class="empty-msg">Nessun libro presente</p>
        </ng-template>
      </div>
    </div>
    <div class="modal-backdrop" *ngIf="showConfirmModal" (click)="cancelSwap()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <p>
          Vuoi scambiare
          <strong>{{ selectedInterested?.title }}</strong>
          con
          <strong>{{ selectedOwn?.title }}</strong>?
        </p>
        <button class="btn modal-btn" (click)="confirmSwap()">Conferma</button>
        <button class="btn modal-btn cancel" (click)="cancelSwap()">Annulla</button>
      </div>
    </div>
  </div>  